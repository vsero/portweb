<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vsero.PortTrack</title>
    <base href="/PortWeb/" />
    <link href="_framework/dotnet.bh1irm4w3l.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-AdW5pgOYwV7PkIvOBgvErwyicFDf8wXes+/UnYQwtE4=" />
    <link rel="stylesheet" href="css/app.css" />
    <script type="importmap">{
  "imports": {
    "./_framework/blazor.webassembly.js": "./_framework/blazor.webassembly.66stpp682q.js",
    "./_framework/dotnet.js": "./_framework/dotnet.bh1irm4w3l.js",
    "./_framework/dotnet.native.js": "./_framework/dotnet.native.69poregybn.js",
    "./_framework/dotnet.runtime.js": "./_framework/dotnet.runtime.q5rqv3xrhm.js"
  },
  "scopes": {},
  "integrity": {
    "./_framework/blazor.webassembly.66stpp682q.js": "sha256-3lCWrko3zwspV40aQhs2S/IMkRSarnHRKIdkHhuXIBA=",
    "./_framework/blazor.webassembly.js": "sha256-3lCWrko3zwspV40aQhs2S/IMkRSarnHRKIdkHhuXIBA=",
    "./_framework/dotnet.bh1irm4w3l.js": "sha256-AdW5pgOYwV7PkIvOBgvErwyicFDf8wXes+/UnYQwtE4=",
    "./_framework/dotnet.js": "sha256-AdW5pgOYwV7PkIvOBgvErwyicFDf8wXes+/UnYQwtE4=",
    "./_framework/dotnet.native.69poregybn.js": "sha256-JvdIvkSF0x6euoPT2QnQSMg2Gyv2oJbFeBi1XmWLYFU=",
    "./_framework/dotnet.native.js": "sha256-JvdIvkSF0x6euoPT2QnQSMg2Gyv2oJbFeBi1XmWLYFU=",
    "./_framework/dotnet.runtime.js": "sha256-ArknccFM1sHNVcih0x1h52AG+abNCoQjl6BlVrv3ePw=",
    "./_framework/dotnet.runtime.q5rqv3xrhm.js": "sha256-ArknccFM1sHNVcih0x1h52AG+abNCoQjl6BlVrv3ePw="
  }
}</script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>

    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="manifest" href="site.webmanifest" />

    <script src="js/telegram-web-app.js"></script>
    <script>
        window.getTelegramData = () => {
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ–±—ä–µ–∫—Ç Telegram —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                if (window.Telegram && window.Telegram.WebApp) {
                    const tg = window.Telegram.WebApp;
                    // –°–æ–æ–±—â–∞–µ–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ (–≤–∞–∂–Ω–æ –¥–ª—è Mini App)
                    tg.ready();

                    if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                        return JSON.stringify(tg.initDataUnsafe);
                    }
                }
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö Telegram:", e);
            }
            return null;
        };


    </script>

    <style>
        :root {
            /* MudBlazor theme */
            --app-bg: #F5F7FA;
            --app-text: #1F2933;
            --app-loader-stroke: #0088CC; /* MudBlazor Primary */
            --app-loader-bg: var(--app-bg);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                /* MudBlazor Dark Mode */
                --app-bg: #32333D;
                --app-text: #E6F4FF;
                --app-loader-stroke: #26A5E4;
                --app-loader-bg: var(--app-bg);
            }
        }

        html, body {
            background-color: var(--app-bg);
        }

        .loading-progress circle {
            fill: none;
            stroke: var(--app-loader-bg);
        }

            .loading-progress circle:last-child {
                stroke: var(--app-loader-stroke);
            }

        .loading-progress-text {
            fill: var(--app-text); /* –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ SVG (–∫–∞–∫ <text>) */
            color: var(--app-text); /* –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –≤ –æ–±—ã—á–Ω–æ–º div */
            font-family: "Roboto", sans-serif;
            font-weight: 500;
        }
    </style>

</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">üóô</span>
    </div>

    <script src="_framework/blazor.webassembly.66stpp682q.js" autostart="false"></script>
    <script>

        (function () {
            const culture = localStorage.getItem('selectedCulture') || 'ru-RU';
            window.Blazor.start({
                // —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∫—É–ª—å—Ç—É—Ä—ã
                applicationCulture: culture
            });
        })();

        // –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏—è —Ñ–æ–∫—É—Å–∞ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞
        window.listenVisibilityChange = (dotNetHelper) => {
            document.addEventListener("visibilitychange", () => {
                if (document.visibilityState === 'visible') {
                    dotNetHelper.invokeMethodAsync('OnVisibilityChanged');
                }
            });
        };

        // –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ MiniApp
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.onEvent('activated', () => {
                console.log("Telegram App Activated");
                dotNetHelper.invokeMethodAsync('OnVisibilityChanged');
            });
        }

    </script>

</body>

</html>
